export const i18n = {
  "meta.title": {
    en: "Gabriel Costa | Data Analyst Portfolio",
    "pt-BR": "Gabriel Costa | Portfólio de Analista de Dados",
  },
  "meta.description": {
    en: "Junior Data Analyst portfolio with projects, certificates, and resume.",
    "pt-BR": "Portfólio de Analista de Dados Júnior com projetos, certificados e currículo.",
  },
  "nav.skip": { en: "Skip to content", "pt-BR": "Pular para o conteúdo" },
  "nav.about": { en: "About", "pt-BR": "Sobre" },
  "nav.projects": { en: "Projects", "pt-BR": "Projetos" },
  "nav.certificates": { en: "Certificates", "pt-BR": "Certificados" },
  "nav.resume": { en: "Resume", "pt-BR": "Currículo" },
  "nav.contact": { en: "Contact", "pt-BR": "Contato" },
  "nav.downloadResumeEn": { en: "Resume EN (PDF)", "pt-BR": "Currículo EN (PDF)" },
  "nav.downloadResumePt": { en: "Resume PT (PDF)", "pt-BR": "Currículo PT (PDF)" },
  "nav.linkedinLabel": { en: "LinkedIn profile", "pt-BR": "Perfil no LinkedIn" },
  "nav.langLabel": { en: "Language", "pt-BR": "Idioma" },
  "nav.langToggle": { en: "EN / PT", "pt-BR": "EN / PT" },
  "nav.langOptionEn": { en: "English", "pt-BR": "Inglês" },
  "nav.langOptionPt": { en: "Português (BR)", "pt-BR": "Português (BR)" },
  "nav.menuOpen": { en: "Open navigation menu", "pt-BR": "Abrir menu de navegação" },
  "nav.menuClose": { en: "Close navigation menu", "pt-BR": "Fechar menu de navegação" },
  "hero.eyebrow": { en: "Brazil - Junior Data Analyst", "pt-BR": "Brasil - Analista de Dados Júnior" },
  "hero.title": {
    en: "Junior Data Analyst | Power BI | Python | SQL",
    "pt-BR": "Analista de Dados Júnior | Power BI | Python | SQL",
  },
  "hero.subtitle": {
    en: "I turn messy data into clear, actionable insights with dashboards, automation, and clean pipelines.",
    "pt-BR": "Transformo dados confusos em insights claros e acionáveis com dashboards, automação e pipelines limpos.",
  },
  "hero.ctaProjects": { en: "View Projects", "pt-BR": "Ver Projetos" },
  "hero.ctaCerts": { en: "Certificates", "pt-BR": "Certificados" },
  "hero.meta1": { en: "Location: Brazil", "pt-BR": "Localização: Brasil" },
  "hero.meta2": { en: "Open to mid-level roles and contract work", "pt-BR": "Aberto a posições de nível pleno e contrato" },
  "hero.cardTitle": { en: "What I deliver", "pt-BR": "O que eu entrego" },
  "hero.cardItem1": { en: "Automated reporting that reduces manual work", "pt-BR": "Relatórios automatizados que reduzem trabalho manual" },
  "hero.cardItem2": { en: "KPI dashboards with clear performance tracking", "pt-BR": "Dashboards de KPIs com acompanhamento claro de desempenho" },
  "hero.cardItem3": { en: "Data stories that align teams quickly", "pt-BR": "Narrativas de dados que alinham times rapidamente" },
  "about.title": { en: "About", "pt-BR": "Sobre" },
  "about.subtitle": {
    en: "Detail-driven junior analyst focused on clear insights, reliable data models, and stakeholder-ready storytelling.",
    "pt-BR": "Analista júnior detalhista, focado em insights claros, modelos confiáveis e storytelling para stakeholders.",
  },
  "about.bullet1": {
    en: "Translate business questions into clear metrics, KPIs, and aligned definitions",
    "pt-BR": "Transformo perguntas de negócio em métricas claras, KPIs e definições alinhadas",
  },
  "about.bullet2": {
    en: "Build Power BI dashboards with thoughtful UX, filters, and drill-downs",
    "pt-BR": "Crio dashboards no Power BI com UX pensada, filtros e drill-downs",
  },
  "about.bullet3": {
    en: "Prioritize data quality, documentation, and trusted handoffs to teams",
    "pt-BR": "Priorizo qualidade de dados, documentação e entregas confiáveis para o time",
  },
  "about.stackTitle": { en: "Tech stack", "pt-BR": "Stack de tecnologia" },
  "projects.title": { en: "Projects", "pt-BR": "Projetos" },
  "projects.subtitle": {
    en: "Capstone-style project in progress focused on Power BI analytics and business visibility.",
    "pt-BR": "Projeto estilo capstone em andamento, focado em analytics no Power BI e visibilidade do negócio.",
  },
  "projects.featuredTag": { en: "In progress", "pt-BR": "Em andamento" },
  "project.featured.title": {
    en: "Retail Performance & Customer Insights (Power BI)",
    "pt-BR": "Performance de Varejo & Insights de Clientes (Power BI)",
  },
  "project.featured.summary": {
    en: "Capstone-style Power BI project that models retail performance end-to-end.",
    "pt-BR": "Projeto estilo capstone em Power BI que modela a performance de varejo de ponta a ponta.",
  },
  "project.featured.resultsTitle": { en: "What it covers", "pt-BR": "O que cobre" },
  "project.featured.metricsTitle": { en: "Data & metrics", "pt-BR": "Dados & métricas" },
  "project.featured.metric1": {
    en: "Revenue, margin %, and return rate",
    "pt-BR": "Receita, margem % e taxa de devolução",
  },
  "project.featured.metric2": {
    en: "Average order value and repeat purchase rate",
    "pt-BR": "Ticket médio e taxa de recompra",
  },
  "project.featured.metric3": {
    en: "Region, category, and customer segment views",
    "pt-BR": "Visões por região, categoria e segmento de clientes",
  },
  "project.featured.highlight1": {
    en: "Power Query cleanup and modeling from raw sales data",
    "pt-BR": "Tratamento no Power Query e modelagem a partir de dados brutos de vendas",
  },
  "project.featured.highlight2": {
    en: "DAX measures for revenue, margin, and retention",
    "pt-BR": "Medidas DAX para receita, margem e retenção",
  },
  "project.featured.highlight3": {
    en: "Executive dashboard with drill-downs by region and category",
    "pt-BR": "Dashboard executivo com drill-down por região e categoria",
  },
  "project.featured.viewRepo": { en: "View Repo", "pt-BR": "Ver Repositório" },
  "project.featured.viewDashboard": { en: "View Dashboard", "pt-BR": "Ver Dashboard" },
  "project.featured.contactCta": { en: "Request walkthrough", "pt-BR": "Solicitar apresentação" },
  "project.featured.readCaseStudy": { en: "Read Case Study", "pt-BR": "Ler Estudo de Caso" },
  "project.placeholder1.title": { en: "Sales Forecasting Pipeline", "pt-BR": "Pipeline de Previsão de Vendas" },
  "project.placeholder1.desc": {
    en: "Baseline forecasting with time-series features and monthly performance checks.",
    "pt-BR": "Previsão base com séries temporais e checagens mensais de performance.",
  },
  "project.placeholder2.title": { en: "Customer Retention Dashboard", "pt-BR": "Dashboard de Retenção de Clientes" },
  "project.placeholder2.desc": {
    en: "Cohort analysis with churn indicators and actionable segments.",
    "pt-BR": "Análise de coortes com indicadores de churn e segmentos acionáveis.",
  },
  "project.screenshot1": { en: "Dashboard screenshot placeholder", "pt-BR": "Placeholder de captura do dashboard" },
  "project.screenshot2": { en: "Pipeline screenshot placeholder", "pt-BR": "Placeholder de captura do pipeline" },
  "project.screenshot3": { en: "Alerting screenshot placeholder", "pt-BR": "Placeholder de captura de alertas" },
  "project.caseStudy.title": {
    en: "Case Study: Retail Performance & Customer Insights",
    "pt-BR": "Estudo de Caso: Performance de Varejo & Insights de Clientes",
  },
  "project.caseStudy.closeLabel": { en: "Close case study", "pt-BR": "Fechar estudo de caso" },
  "project.caseStudy.problemTitle": { en: "Problem", "pt-BR": "Problema" },
  "project.caseStudy.problemBody": {
    en: "Retail teams lacked a consistent view of revenue, margin, and returns by region and category, and weekly reporting was manual.",
    "pt-BR": "Times de varejo não tinham uma visão consistente de receita, margem e devoluções por região e categoria, e o reporte semanal era manual.",
  },
  "project.caseStudy.approachTitle": { en: "Approach", "pt-BR": "Abordagem" },
  "project.caseStudy.approachBody": {
    en: "Used a public retail dataset, cleaned and shaped it in Power Query, modeled a star schema, and standardized KPIs in DAX.",
    "pt-BR": "Usei um dataset público de varejo, tratei e transformei no Power Query, modelei um esquema estrela e padronizei KPIs em DAX.",
  },
  "project.caseStudy.dataModelTitle": { en: "Data Model", "pt-BR": "Modelo de Dados" },
  "project.caseStudy.dataModelBody": {
    en: "FactSales + FactReturns linked to Date, Product, Store, and Customer dimensions for clean drill-downs.",
    "pt-BR": "FactSales + FactReturns conectadas às dimensões Data, Produto, Loja e Cliente para drill-downs limpos.",
  },
  "project.caseStudy.metricsTitle": { en: "Data & Metrics", "pt-BR": "Dados & Métricas" },
  "project.caseStudy.metricsBody": {
    en: "Dataset includes orders, products, customers, stores, and dates. Key metrics include revenue, margin %, return rate, average order value, and repeat purchase rate.",
    "pt-BR": "O dataset inclui pedidos, produtos, clientes, lojas e datas. As métricas principais incluem receita, margem %, taxa de devolução, ticket médio e taxa de recompra.",
  },
  "project.caseStudy.dashboardTitle": { en: "Dashboard Highlights", "pt-BR": "Destaques do Dashboard" },
  "project.caseStudy.dashboardBody": {
    en: "Executive KPIs (revenue, margin %, return rate), trends, region/category drill-downs, and customer segments.",
    "pt-BR": "KPIs executivos (receita, margem %, taxa de devolução), tendências, drill-down por região/categoria e segmentação de clientes.",
  },
  "project.caseStudy.automationTitle": { en: "Automation", "pt-BR": "Automação" },
  "project.caseStudy.automationBody": {
    en: "Planned Power BI Service refresh with optional Power Automate alerts for margin drops and return spikes.",
    "pt-BR": "Refresh planejado no Power BI Service com alertas opcionais no Power Automate para quedas de margem e picos de devolução.",
  },
  "project.caseStudy.resultsTitle": { en: "Outcome", "pt-BR": "Resultado" },
  "project.caseStudy.resultsBody": {
    en: "Single source of truth with clear KPI definitions and faster weekly reporting for stakeholders.",
    "pt-BR": "Fonte única da verdade com KPIs claros e reporte semanal mais rápido para stakeholders.",
  },
  "project.caseStudy.improvementsTitle": { en: "Improvements", "pt-BR": "Melhorias" },
  "project.caseStudy.improvementsBody": {
    en: "Next steps: publish to Power BI Service, add RLS, incremental refresh, and a data dictionary.",
    "pt-BR": "Próximos passos: publicar no Power BI Service, adicionar RLS, refresh incremental e dicionário de dados.",
  },
  "project.caseStudy.architectureTitle": { en: "Project Architecture", "pt-BR": "Arquitetura do Projeto" },
  "project.caseStudy.architectureDesc": {
    en: "Data sources feed ETL, then a warehouse, then dashboards and alerts.",
    "pt-BR": "Fontes de dados alimentam o ETL, depois um warehouse, depois dashboards e alertas.",
  },
  "project.caseStudy.architectureSource": { en: "Data Sources", "pt-BR": "Fontes de Dados" },
  "project.caseStudy.architectureEtl": { en: "ETL + Validation", "pt-BR": "ETL + Validação" },
  "project.caseStudy.architectureWarehouse": { en: "Data Warehouse", "pt-BR": "Data Warehouse" },
  "project.caseStudy.architectureDashboard": { en: "Power BI Dashboards", "pt-BR": "Dashboards Power BI" },
  "project.caseStudy.architectureAlerts": { en: "Alert Automation", "pt-BR": "Automação de Alertas" },
  "cert.title": { en: "Certificates", "pt-BR": "Certificados" },
  "cert.subtitle": { en: "Verified credentials with shareable deep links.", "pt-BR": "Credenciais verificadas com links compartilháveis." },
  "cert.filterLabel": { en: "Certificate filters", "pt-BR": "Filtros de certificados" },
  "cert.filterAll": { en: "All", "pt-BR": "Todos" },
  "cert.filterMicrosoft": { en: "Microsoft", "pt-BR": "Microsoft" },
  "cert.filterData": { en: "Data", "pt-BR": "Dados" },
  "cert.filterEnglish": { en: "English", "pt-BR": "Inglês" },
  "cert.searchLabel": { en: "Search certificates", "pt-BR": "Buscar certificados" },
  "cert.searchPlaceholder": { en: "Search by title or issuer", "pt-BR": "Buscar por título ou emissor" },
  "cert.card.viewCredential": { en: "Open PDF", "pt-BR": "Abrir PDF" },
  "cert.card.copyLink": { en: "Copy link", "pt-BR": "Copiar link" },
  "cert.card.copied": { en: "Link copied", "pt-BR": "Link copiado" },
  "cert.empty": { en: "No certificates match your search.", "pt-BR": "Nenhum certificado corresponde à sua busca." },
  "cert.pl900.title": { en: "PL-900: Microsoft Power Platform Fundamentals", "pt-BR": "PL-900: Fundamentos do Microsoft Power Platform" },
  "cert.pl900.issuer": { en: "Microsoft", "pt-BR": "Microsoft" },
  "cert.pl900.shortDesc": { en: "Core Power Platform concepts and capabilities.", "pt-BR": "Conceitos e capacidades essenciais do Power Platform." },
  "cert.pl900.date": { en: "2025", "pt-BR": "2025" },
  "cert.datacamp.title": { en: "Data Analyst Associate", "pt-BR": "Data Analyst Associate" },
  "cert.datacamp.issuer": { en: "DataCamp", "pt-BR": "DataCamp" },
  "cert.datacamp.shortDesc": { en: "Assessment-driven credential for analytics skills.", "pt-BR": "Credencial baseada em avaliação para habilidades analíticas." },
  "cert.datacamp.date": { en: "Sep 2025", "pt-BR": "Set 2025" },
  "cert.toeic.title": { en: "TOEIC", "pt-BR": "TOEIC" },
  "cert.toeic.issuer": { en: "ETS", "pt-BR": "ETS" },
  "cert.toeic.shortDesc": { en: "Score 910/990", "pt-BR": "Pontuação 910/990" },
  "cert.toeic.date": { en: "Score 910/990", "pt-BR": "Pontuação 910/990" },
  "resume.title": { en: "Resume", "pt-BR": "Currículo" },
  "resume.subtitle": {
    en: "Choose English or Portuguese and get a clear, recruiter-friendly overview.",
    "pt-BR": "Escolha inglês ou português e tenha uma visão clara e objetiva.",
  },
  "resume.downloadEn": { en: "Resume EN (PDF)", "pt-BR": "Currículo EN (PDF)" },
  "resume.downloadPt": { en: "Resume PT (PDF)", "pt-BR": "Currículo PT (PDF)" },
  "resume.snapshotTitle": { en: "Resume highlights", "pt-BR": "Destaques do currículo" },
  "resume.snapshotExperience": { en: "Experience", "pt-BR": "Experiência" },
  "resume.snapshotExperienceBody": {
    en: "Developing a junior Power BI project with retail performance and customer insights.",
    "pt-BR": "Desenvolvendo um projeto júnior no Power BI com performance de varejo e insights de clientes.",
  },
  "resume.snapshotEducation": { en: "Education", "pt-BR": "Formação" },
  "resume.snapshotEducationBody": {
    en: "Ongoing studies with emphasis on analytics and statistics.",
    "pt-BR": "Estudos em andamento com ênfase em analytics e estatística.",
  },
  "resume.snapshotSkills": { en: "Skills", "pt-BR": "Habilidades" },
  "resume.snapshotSkillsBody": {
    en: "Power BI (Power Query, DAX), SQL, Python, Excel, data modeling.",
    "pt-BR": "Power BI (Power Query, DAX), SQL, Python, Excel, modelagem de dados.",
  },
  "resume.note": { en: "Need a tailored version for a role? Just email me.", "pt-BR": "Precisa de uma versão personalizada para a vaga? É só me enviar um e-mail." },
  "contact.title": { en: "Contact", "pt-BR": "Contato" },
  "contact.subtitle": { en: "Let's connect for roles, projects, or collaboration.", "pt-BR": "Vamos conversar sobre vagas, projetos ou colaboração." },
  "contact.copyEmail": { en: "Copy email", "pt-BR": "Copiar e-mail" },
  "contact.copied": { en: "Email copied", "pt-BR": "E-mail copiado" },
  "contact.emailLabel": { en: "Email address", "pt-BR": "Endereço de e-mail" },
  "contact.linkedinLabel": { en: "LinkedIn profile", "pt-BR": "Perfil no LinkedIn" },
  "contact.githubLabel": { en: "GitHub profile", "pt-BR": "Perfil no GitHub" },
  "footer.note": { en: "Built with HTML, CSS, and vanilla JavaScript.", "pt-BR": "Feito com HTML, CSS e JavaScript puro." },
  "noscript.message": {
    en: "JavaScript is required for language switching, filters, and the case study modal.",
    "pt-BR": "JavaScript é necessário para o seletor de idioma, filtros e o modal do estudo de caso.",
  },
};

export const supportedLangs = ["en", "pt-BR"];

export function isSupportedLang(lang) {
  return supportedLangs.includes(lang);
}

export function translate(key, lang = "en") {
  const entry = i18n[key];
  if (!entry) return key;
  return entry[lang] || entry.en || "";
}

function setMeta(selector, content) {
  const el = document.querySelector(selector);
  if (el && content) {
    el.setAttribute("content", content);
  }
}

export function updateMeta(lang) {
  const title = translate("meta.title", lang);
  const description = translate("meta.description", lang);
  document.title = title;
  setMeta("meta[name='description']", description);
  setMeta("meta[property='og:title']", title);
  setMeta("meta[property='og:description']", description);
  setMeta("meta[name='twitter:title']", title);
  setMeta("meta[name='twitter:description']", description);
}

export function applyTranslations(lang) {
  document.documentElement.lang = lang;

  document.querySelectorAll("[data-i18n]").forEach((el) => {
    const key = el.getAttribute("data-i18n");
    if (!key) return;
    el.textContent = translate(key, lang);
  });

  document.querySelectorAll("[data-i18n-attr]").forEach((el) => {
    const mappings = el.getAttribute("data-i18n-attr");
    if (!mappings) return;
    mappings.split(";").forEach((pair) => {
      const [attr, key] = pair.split(":");
      if (!attr || !key) return;
      el.setAttribute(attr.trim(), translate(key.trim(), lang));
    });
  });

  updateMeta(lang);
}

export function getLangFromUrl() {
  const params = new URLSearchParams(window.location.search);
  const lang = params.get("lang");
  if (isSupportedLang(lang)) return lang;
  return null;
}

export function updateUrlLang(lang) {
  const url = new URL(window.location.href);
  url.searchParams.set("lang", lang);
  history.replaceState({}, "", url);
}

export function getInitialLang() {
  const urlLang = getLangFromUrl();
  if (urlLang) {
    localStorage.setItem("lang", urlLang);
    return urlLang;
  }

  const stored = localStorage.getItem("lang");
  if (isSupportedLang(stored)) return stored;

  const browserLang = navigator.language || "en";
  return browserLang.toLowerCase().startsWith("pt") ? "pt-BR" : "en";
}
